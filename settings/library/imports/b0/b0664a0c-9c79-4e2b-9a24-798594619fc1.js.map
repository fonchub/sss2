{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\module\\hall\\script/assets\\module\\hall\\script\\SelectPlayway.js"],"names":["beiMiCommon","require","cc","Class","extends","properties","first","default","type","Node","second","gamepoint","title","global","playway","Prefab","content","onLoad","beimi","user","disMenu","playwaypool","NodePool","i","put","instantiate","console","log","playwayarray","Array","games","inx","children","length","name","gameenable","gamemodel","j","types","gametype","code","active","onClick","event","data","game","playways","get","script","getComponent","init","parent","push","onRoomClick","_menuDisplay","third","Animation","play","onSecondBack","girlAni","playToRight","collect","onThirddBack","splice","order"],"mappings":"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","file":"SelectPlayway.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\module\\hall\\script","sourcesContent":["var beiMiCommon = require(\"BeiMiCommon\");\ncc.Class({\n    extends: beiMiCommon,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        //第一\n        first: {\n            default: null,\n            type: cc.Node\n        },\n        //第二\n        second: {\n            default: null,\n            type: cc.Node\n        },\n        gamepoint:{\n            default: null,\n            type: cc.Node\n        },\n        title:{\n            default: null,\n            type: cc.Node\n        },\n        global: {\n            default: null,\n            type: cc.Node\n        },\n        playway: {\n            default: null,\n            type: cc.Prefab\n        },\n        content: {\n            default: null,\n            type: cc.Node\n        },\n        \n        \n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.beimi != null && cc.beimi.user != null){\n            this.disMenu(\"first\") ;\n            this.playwaypool = new cc.NodePool();\n            for(var i=0 ; i<20 ; i++){ //最大玩法数量不能超过20种\n                this.playwaypool.put(cc.instantiate(this.playway));\n            }\n            console.log(this.playwaypool+\":playwaypool的值\");\n            console.log(this.playwaypool)\n            this.playwayarray = new Array();\n            if(this.gamepoint && cc.beimi!=null && cc.beimi.games !=null){\n                for(var inx=0 ; inx < this.gamepoint.children.length ; inx++){\n                    let name = this.gamepoint.children[inx].name ;\n                    var gameenable = false ;\n                    for(var i=0 ; i<cc.beimi.games.length ; i++){\n                        var gamemodel = cc.beimi.games[i] ;\n                        for(var j=0 ; j<gamemodel.types.length ; j++){\n                            let gametype = gamemodel.types[j] ;\n                            if(gametype.code == name){\n                                gameenable = true ; break ;\n                            }\n                        }\n                        if(gameenable == true){break ;}\n                    }\n                    if(gameenable == true){\n                        this.gamepoint.children[inx].active = true ;\n                    }else{\n                        this.gamepoint.children[inx].active = false ;\n                    }\n                }\n            }\n        }\n    },\n\n\n    onClick:function(event, data){\n        console.log(data+\"data的值\");\n        \n        this.disMenu(\"second\") ;\n        //取到DefaultHallDataBind.js节点所有方法赋值给girAni\n        // var girlAni = this.global.getComponent(\"DefaultHallDataBind\");\n        //用DefaultHallDataBind.js节点playToLeft方法\n        // girlAni.playToLeft();\n        //播放动画组件\n        // this._secondAnimCtrl = this.second.getComponent(cc.Animation);\n        // this._secondAnimCtrl.play(\"playway_display\");\n        \n        if(this.title){\n            for(var inx = 0 ; inx<this.title.children.length ; inx++){\n                if(this.title.children[inx].name == data){\n                    console.log(\"CAV\"+this.title);\n                    console.log(this.title);\n                    \n                    this.title.children[inx].active = true ;\n                }else{\n                    this.title.children[inx].active = false ;\n                }\n\n            }\n        }\n        /**\n         * 加载预制的 玩法\n         */\n        var gametype = cc.beimi.game.type(data);\n\n        console.log(gametype)\n        if(gametype!=null){\n            for(var inx =0 ; inx < gametype.playways.length ; inx++){\n                /**\n                 * 此处需要做判断，检查 对象池有足够的对象可以使用\n                 */\n                //获取对象池中的对象，如果对象池没有可用对象，则返回空\n                var playway = this.playwaypool.get();\n                var script = playway.getComponent(\"Playway\") ;\n                console.log(script+\"script的值\");\n                if(script == null){\n                    script = playway.getComponent(\"RoomPlayway\") ;\n                    console.log(script)\n                }\n                script.init(gametype.playways[inx]);\n                playway.parent = this.content ;\n                this.playwayarray.push(playway) ;\n            }\n            console.log(this.content)\n        }\n\n\n        \n\n        \n    },\n\n\n    onRoomClick:function(){\n        this.disMenu(\"third\") ;\n        this._menuDisplay = this.third.getComponent(cc.Animation);\n        this._menuDisplay.play(\"play_room_display\");\n    },\n    onSecondBack:function(event ,data){\n        var girlAni = this.global.getComponent(\"DefaultHallDataBind\");\n        girlAni.playToRight();\n        this.collect();\n        this.disMenu(\"first\") ;\n    },\n    onThirddBack:function(event ,data){\n        this.disMenu(\"first\") ;\n    },\n    collect:function(){\n        for(var inx =0 ; inx < this.playwayarray.length ; inx++){\n            this.playwaypool.put(this.playwayarray[inx]);\n        }\n        this.playwayarray.splice(0 ,this.playwayarray.length );\n    },\n    disMenu:function(order){\n        if(order == 'first'){\n            this.first.active = true ;\n            this.second.active = false ;\n            if(this.third != null){\n                this.third.active = false ;\n            }\n        }else if(order == 'second'){\n            this.first.active = false;\n            this.second.active = true;\n            if(this.third != null){\n                this.third.active = false ;\n            }\n        }else if(order == 'third'){\n            this.first.active = false;\n            this.second.active = false;\n            if(this.third != null){\n                this.third.active = true ;\n            }\n        }\n    }\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n"]}