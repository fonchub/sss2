{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\module\\game\\dizhu\\script/assets\\module\\game\\dizhu\\script\\SummaryDetail.js"],"names":["cc","Class","extends","Component","properties","workitem","default","type","Node","myscore","Label","myflag","player_1","player_1_flag","player_1_name","player_1_score","player_2","player_2_flag","player_2_name","player_2_score","onLoad","self","on","event","context","summarypage","destroy","restart","stopPropagation","onCloseClick","create","data","index","inx","players","length","player","userid","beimi","user","id","process","username","score","flag","string","win","dizhu","active"],"mappings":"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","file":"SummaryDetail.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\module\\game\\dizhu\\script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        workitem:{\n            default: null,\n            type: cc.Node\n        },\n        myscore:{   //底牌\n            default: null,\n            type: cc.Label\n        },\n        myflag:{\n            default: null,\n            type: cc.Node\n        },\n        player_1:{\n            default: null,\n            type: cc.Node\n        },\n        player_1_flag:{\n            default: null,\n            type: cc.Node\n        },\n        player_1_name:{\n            default: null,\n            type: cc.Label\n        },\n        player_1_score:{\n            default: null,\n            type: cc.Label\n        },\n        player_2:{\n            default: null,\n            type: cc.Node\n        },\n        player_2_flag:{\n            default: null,\n            type: cc.Node\n        },\n        player_2_name:{\n            default: null,\n            type: cc.Label\n        },\n        player_2_score:{\n            default: null,\n            type: cc.Label\n        },\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        let self = this ;\n        /**\n         * SummaryClick发射的事件，方便统一处理 / 开始\n         */\n        this.workitem.on(\"begin\",function(event){\n            if(self.context !=null){\n                self.context.summarypage.destroy();\n                /**\n                 * 恢复桌面\n                 */\n                self.context.restart(\"begin\");\n            }\n            event.stopPropagation();\n        });\n        /**\n         * SummaryClick发射的事件，方便统一处理 / 明牌开始\n         */\n        this.workitem.on(\"opendeal\",function(event){\n            if(self.context !=null){\n                self.context.summarypage.destroy();\n                /**\n                 * 恢复桌面，然后发送消息给服务端\n                 */\n                self.context.restart(\"opendeal\");\n            }\n            event.stopPropagation();\n        });\n        /**\n         * SummaryClick发射的事件，方便统一处理 / 开始\n         */\n        this.workitem.on(\"close\",function(event){\n            if(self.context !=null){\n                /**\n                 * 显示操作按钮\n                 */\n                self.context.onCloseClick();\n                self.context.summarypage.destroy();\n            }\n            event.stopPropagation();\n        });\n    },\n    create:function(context , data){\n        this.context = context ;\n        var index = 0 ;\n        for(var inx = 0 ; inx < data.players.length ; inx++){\n            var player = data.players[inx] ;\n            if(player.userid == cc.beimi.user.id){//\n                this.process(player , null  , this.myscore, this.myflag) ;\n            }else{\n                if(index == 0){\n                    this.process(player ,this.player_1_name  , this.player_1_score , this.player_1_flag ) ;\n                }else if(index == 1){\n                    this.process(player ,this.player_2_name  , this.player_2_score , this.player_2_flag ) ;\n                }\n                index = index + 1 ;\n            }\n        }\n    },\n    /**\n     * 显示已经处理完毕的结算信息\n     * @param player\n     * @param username\n     * @param score\n     * @param flag\n     */\n    process:function(player , username , score , flag){\n        if(username != null){\n            username.string = player.username ;\n        }\n        if(player.win == true){\n            score.string = player.score ;\n        }else{\n            score.string = \"-\"+player.score ;\n        }\n\n        if(player.dizhu == true){\n            flag.active = true ;\n        }else{\n            flag.active = false ;\n        }\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n"]}