{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\module\\hall\\script\\menu/assets\\module\\hall\\script\\menu\\JoinRoomClick.js"],"names":["beiMiCommon","require","cc","Class","extends","properties","numdata","default","type","Node","onLoad","roomid","Array","onClick","event","data","length","push","disRoomId","closeOpenWin","ready","socket","param","token","beimi","authorization","join","orgi","user","userid","id","exec","registercallback","roomCallBack","loadding","result","self","parse","extparams","gametype","code","playway","gamemodel","preload","alert","onDeleteClick","a","splice","onCleanClick","children","inx","getComponent","Label","string"],"mappings":"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","file":"JoinRoomClick.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\module\\hall\\script\\menu","sourcesContent":["var beiMiCommon = require(\"BeiMiCommon\");\n\ncc.Class({\n    extends: beiMiCommon,\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        numdata: {\n            default:null,\n            type:cc.Node\n\n\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad : function () {\n        this.roomid = new Array() ;\n    },\n    onClick:function(event,data){\n        if(this.roomid.length < 6){\n            this.roomid.push(data);\n            this.disRoomId();\n        }\n        if(this.roomid.length == 6){\n            this.closeOpenWin();\n            /**\n             * 查询服务端的房间号码 ， 然后通过房间号码找到对应的房间游戏类型，玩法等信息\n             */\n            if(this.ready()){\n                let socket = this.socket();\n                /**\n                 * 发送 room请求\n                 */\n                var param = {\n                    token:cc.beimi.authorization,\n                    roomid:this.roomid.join(\"\"),\n                    orgi:cc.beimi.user.orgi,\n                    userid:cc.beimi.user.id\n                } ;\n                socket.exec(\"searchroom\" , param);\n                this.registercallback(this.roomCallBack);\n            }\n            this.loadding();\n        }\n    },\n    roomCallBack:function(result , self){\n        var data = self.parse(result) ;\n        if(data.result == \"ok\"){\n            var extparams = {\n                gametype : data.code ,\n                playway :  data.id ,\n                gamemodel : \"room\"\n            } ;\n            /**\n             * 发送创建房间开始游戏的请求\n             */\n            self.preload(extparams , self) ;\n        }else if(data.result == \"notexist\"){\n            self.alert(\"房间号不存在。\");\n        }else if(data.result == \"full\"){\n            self.alert(\"房间已满员。\");\n        }\n    },\n    onDeleteClick:function(){\n       var a = this.roomid.splice(this.roomid.length-1 , this.roomid.length) ;\n        this.disRoomId();\n    },\n    onCleanClick:function(){\n        this.roomid.splice(0 , this.roomid.length) ;\n        this.disRoomId();\n    },\n    disRoomId:function(){\n        let children = this.numdata.children ;\n        for(var inx = 0 ; inx < 6 ; inx ++){\n            if(inx < this.roomid.length){\n                children[inx].children[0].getComponent(cc.Label).string = this.roomid[inx] ;\n            }else{\n                children[inx].children[0].getComponent(cc.Label).string = \"-\" ;\n            }\n        }\n    }\n    // update (dt) {},\n});\n"]}